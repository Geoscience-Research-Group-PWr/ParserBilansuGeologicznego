<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Query results</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'MinesAPP/styles.css' %}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
</head>
<body>
    <h1 align="center">Query results for {{ name }}</h1>
    <div align="center">
        <a href="./">Back to search</a>
        <a href="/">Back to menu</a>
    </div><br>
    <div id = "charts">
    <canvas id="myChart" style="width:100%;max-width:600px"></canvas>
    <script>
        x={{ years }};
            console.log(x);
        y={{ sums }};
            console.log(y);
        let  xValues = x;
        let yValues = y;

        new Chart("myChart", {
          type: "line",
          data: {
            labels: xValues,
            datasets: [{
              fill: false,
              lineTension: 0,
              backgroundColor: "rgba(0,0,255,1.0)",
              borderColor: "rgba(0,0,255,0.1)",
              data: yValues
            }]
          },
          options: {
            legend: {display: false},
          }
        });
    </script>
    </div>
    <div>
    {% for table in tables %}
        <table>
            <thead>
                <tr>
                    {% for header in table.headers %}
                        <th>{{ header }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in table.rows %}
                    <tr>
                        {% for element in row %}
                            <td>{{ element }}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table><br>
    {% endfor %}
    </div>
</body>
</html>
